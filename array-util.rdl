core:xq-version($,"3.1"),
core:module($,a,"http://raddle.org/array-util",()),
core:define($,a:put,(),(core:array($,array,core:item()?),core:item($,position),core:item($,member)),core:item(),(array:insert-before(array:remove($array,$position),$position,$member))),
core:define($,a:last,(),(core:array($,array,core:item()?)),core:item(),((core:item($,s,array:size($array)),core:if(core:ggt($s,0),$array($s),())))),
core:define($,a:initial,(),(core:array($,array,core:item()?)),core:item(),((core:item($,s,array:size($array)),core:if(core:ggt($s,0),array:remove($array,$s),$array)))),
core:define($,a:fold-left,(),(core:array($,array,core:item()?),core:item($,zero),core:item($,function)),core:item(),(core:if(core:eq(array:size($array),0),$zero,a:fold-left(array:tail($array),$function($zero,array:head($array)),$function)))),
core:define($,a:fold-left-at,(),(core:array($,array,core:item()?),core:item($,zero),core:item($,function)),core:item(),(a:fold-left-at($array,$zero,$function,1))),
core:define($,a:fold-left-at,(),(core:array($,array,core:item()?),core:item($,zero),core:item($,function),core:item($,at)),core:item(),(core:if(core:eq(array:size($array),0),$zero,a:fold-left-at(array:tail($array),$function($zero,array:head($array),$at),$function,core:add($at,1))))),
core:define($,a:for-each,(),(core:array($,array,core:item()?),core:item($,function)),core:item(),(a:for-each($array,$function,core:array(())))),
core:define($,a:for-each,(),(core:array($,array,core:item()?),core:item($,function),core:item($,ret)),core:item(),(core:if(core:eq(array:size($array),0),$ret,a:for-each(array:tail($array),$function,array:append($ret,$function(array:head($array))))))),
core:define($,a:for-each-at,(),(core:array($,array,core:item()?),core:item($,function)),core:item(),(a:for-each-at($array,$function,core:array(()),1))),
core:define($,a:for-each-at,(),(core:array($,array,core:item()?),core:item($,function),core:item($,ret),core:item($,at)),core:item(),(core:if(core:eq(array:size($array),0),$ret,a:for-each-at(array:tail($array),$function,array:append($ret,$function(array:head($array),$at)),core:add($at,1)))))